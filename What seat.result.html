<html ng-app="my-app">
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.2/angular.min.js"></script>
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
		<link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.indigo-pink.min.css">
		<script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>
	</head>
	<body ng-controller="TestResultController">
		<h2><small>Test result for</small> {{data.project}} <small>project</small><br/>
		<small style="opacity: 1;"><small><span style="color: green">PASSED: {{data.pass}}</span>, <span style="color: red">FAILED: {{data.fail}}</span>, <span>TOTAL: {{data.pass + data.fail}}</span></small></small></h2>
		<ul class="mdl-components__warning" style="color: orange;">
			<li ng-repeat="w in data.warning" ng-bind="w"></li>
		</ul>
		<hr/>
		<div ng-repeat="testcase in data.testcases">
			<h4>
				{{testcase.title}}<br/>
				<small><span style="color: green">PASSED: {{testcase.pass}}</span>, <span style="color: red">FAILED: {{testcase.fail}}</span>, <span>TOTAL: {{testcase.pass + testcase.fail}}</span></small>
			</h4>
			<table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
				<thead>
					<tr>
						<th class="mdl-data-table__cell--non-numeric">ID</th>
						<th class="mdl-data-table__cell--non-numeric">Method<br/>& Data</th>
						<th class="mdl-data-table__cell--non-numeric">Url pattern<small> / url actual</small><br/>API url which used for testing</th>
						<th class="mdl-data-table__cell--non-numeric">Expected<br/>Response data</th>
						<th class="mdl-data-table__cell--non-numeric">Actual<br/>Response data</th>
						<th class="mdl-data-table__cell--non-numeric">Variable<br/>Stored response data</th>
						<th class="mdl-data-table__cell--non-numeric">Apply<br/>Update data after response done</th>
						<th class="mdl-data-table__cell--non-numeric">Error<br/>Description</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="api in testcase.api" style="color: {{api.resultTest ? (api.resultTest.pass ? 'green' : 'red') : ''}}" id="{{api.id}}">
						<th class="mdl-data-table__cell--non-numeric"><b ng-bind="api.id"></b></th>
						<td class="mdl-data-table__cell--non-numeric" title="Start: {{api.resultTest.start | date: 'hh:mm:ss'}}, Done: {{api.resultTest.stop | date: 'hh:mm:ss'}}"><a href="javascript:void(0);" ng-click="showLog('Request body', api._body);"><b ng-bind="api.method.toUpperCase()"></b></a><br/><small>( {{api.resultTest.duration}} ms )</small></td>
						<td class="mdl-data-table__cell--non-numeric"><div ng-bind="'#' + api.des"></div><b><small ng-bind="api._url ? api._url : api.url"></small></b></td>
						<td class="mdl-data-table__cell--non-numeric" title="{{api.expect | json}}"><a href="javascript:void(0)" ng-bind="api.expect" ng-click="showLog('Expected data', api.expect)"></a></td>
						<td class="mdl-data-table__cell--non-numeric" title="{{api.actual | json}}"><a href="javascript:void(0)" ng-bind="api.actual" ng-click="showLog('Actual data', api.actual)"></a></td>
						<td class="mdl-data-table__cell--non-numeric"><a href="javascript:void(0)" ng-click="showLog('Value of ' + api.var, api.actual);"><b ng-bind="api.var"></b></a></td>
						<td class="mdl-data-table__cell--non-numeric"><a href="javascript:void(0)" ng-click="showLog('Apply value', api.applies);"><b ng-bind="api.applies"></b></a></td>
						<td class="mdl-data-table__cell--non-numeric">
							<div ng-bind="api.resultTest.des"></div>
							<a href="#{{api.resultTest.impactId}}" ng-if="api.resultTest.impactId">impact to {{api.resultTest.impactId}}</a>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<br/><br/><br/>
	</body>
	<script type="text/javascript">
		angular.module('my-app', [])
		  .controller('TestResultController', function($scope, $http) {
		    $scope.data = {"project":"What seat","env":{"url":"http://localhost","port":8080,"login":{"username":"tuanha","password":"123aA"},"uniqueId":1},"status":[200,201],"headers":{"content-type":"application/json"},"testcases":[{"title":"API Login","api":[{"des":"Login","method":"POST","url":"${env.url}:${env.port}/hugelist/account/login","body":{"userName":"tuanha","passWord":"123aA"},"var":"currentUser","expect":{"status":200,"data":{"code":"OK"}},"id":"N-0","resultTest":{"start":1459162588208,"stop":1459162588388,"duration":180,"pass":true},"_url":"http://localhost:8080/hugelist/account/login","_body":{"userName":"tuanha","passWord":"123aA"},"actual":{"code":"OK","value":"Login was successful","baseClass":[{"id":"8130e305-c1b7-4d51-a770-390d9821ec49","aid":"8130e305-c1b7-4d51-a770-390d9821ec49","userName":"tuanha","token":"3c9e2fe3399e67d33e98e9ee9a97f115","passWord":"67AFA54C6F8BFCFE4E10568BC23EDFDB59CCAE34","email":"tuanhatft@yahoo.com","postCount":null,"displayName":"","aboutMe":"","address":"","mobile":"","avatar":"","background":"","deviceId":["dhmHmeGMK9E:APA91bG32eAfv_Im7zAJe4CTkZ9uR6APnndkDg-C2SwGeO5QVqTAGjf_DrHqaHHtuMe3D72QepPcVX39TEkUUyRvXWv55ElXpNBnR5bNOCko5jEx7hq06gTxg1hIOpN8XTqehIz4wAim"],"profile":"","role":null,"accountType":0,"fbId":null,"gplusId":null,"twId":null}]}}],"pass":1,"fail":0},{"title":"API Place","api":[{"des":"Add place","method":"PUT","url":"${env.url}:${env.port}/whatseat/place/addPlace","body":{"aid":"8130e305-c1b7-4d51-a770-390d9821ec49","token":"3c9e2fe3399e67d33e98e9ee9a97f115","place":{"title":"place 1","address":"address 1"}},"var":"newPlace","expect":{"status":200,"data":{"code":"OK"}},"id":"N-1","resultTest":{"start":1459162588389,"stop":1459162605339,"duration":16950,"pass":true},"_url":"http://localhost:8080/whatseat/place/addPlace","_body":{"aid":"8130e305-c1b7-4d51-a770-390d9821ec49","token":"3c9e2fe3399e67d33e98e9ee9a97f115","place":{"title":"place 1","address":"address 1"}},"actual":{"code":"OK","value":"Your Place created successfully","baseClass":[{"itemId":"33f32d28-b03d-41ee-97e5-7eac7ce435d9","aid":"8130e305-c1b7-4d51-a770-390d9821ec49","title":"place 1 updated","address":"address 1 updated","itemDescription":null,"cuisineId":null,"nationality":null,"placeIcon":null,"photos":null,"meals":null,"location":null,"enableReview":0,"state":0,"reviewScore":0,"ratingScore":0,"createDate":"2016-03-28 17:56:33 +07:00","removeDate":null,"description":"des 1 updated"}]}},{"des":"Update place","method":"POST","url":"${env.url}:${env.port}/whatseat/place/updatePlace","body":{"aid":"8130e305-c1b7-4d51-a770-390d9821ec49","token":"3c9e2fe3399e67d33e98e9ee9a97f115","place":{"itemId":"33f32d28-b03d-41ee-97e5-7eac7ce435d9","title":"place 1 updated","address":"address 1 updated","description":"des 1 updated"}},"apply":{"newPlace":{"baseClass":[{"title":"place 1 updated","address":"address 1 updated","description":"des 1 updated"}]}},"expect":{"data":{"code":"OK"},"status":[200,201]},"id":"N-2","resultTest":{"start":1459162605339,"stop":1459162617293,"duration":11954,"pass":true},"_url":"http://localhost:8080/whatseat/place/updatePlace","_body":{"aid":"8130e305-c1b7-4d51-a770-390d9821ec49","token":"3c9e2fe3399e67d33e98e9ee9a97f115","place":{"itemId":"33f32d28-b03d-41ee-97e5-7eac7ce435d9","title":"place 1 updated","address":"address 1 updated","description":"des 1 updated"}},"actual":{"code":"OK","value":"Your Place updated successfully","baseClass":[]},"applies":[{"varName":"newPlace","oldValue":{"code":"OK","value":"Your Place created successfully","baseClass":[{"itemId":"33f32d28-b03d-41ee-97e5-7eac7ce435d9","aid":"8130e305-c1b7-4d51-a770-390d9821ec49","title":"place 1","address":"address 1","itemDescription":null,"cuisineId":null,"nationality":null,"placeIcon":null,"photos":null,"meals":null,"location":null,"enableReview":0,"state":0,"reviewScore":0,"ratingScore":0,"createDate":"2016-03-28 17:56:33 +07:00","removeDate":null}]},"newValue":{"code":"OK","value":"Your Place created successfully","baseClass":[{"itemId":"33f32d28-b03d-41ee-97e5-7eac7ce435d9","aid":"8130e305-c1b7-4d51-a770-390d9821ec49","title":"place 1 updated","address":"address 1 updated","itemDescription":null,"cuisineId":null,"nationality":null,"placeIcon":null,"photos":null,"meals":null,"location":null,"enableReview":0,"state":0,"reviewScore":0,"ratingScore":0,"createDate":"2016-03-28 17:56:33 +07:00","removeDate":null,"description":"des 1 updated"}]}}]},{"des":"Get all place","method":"POST","url":"${env.url}:${env.port}/whatseat/place/getAllPlaces","body":{},"expect":{"data":{"code":"OK"},"status":[200,201]},"id":"N-3","resultTest":{"start":1459162617293,"pass":false,"des":"Expected: code = \"OK\", Actual: code = \"NG\"","stop":1459162629298,"duration":12005},"_url":"http://localhost:8080/whatseat/place/getAllPlaces","_body":{},"actual":{"code":"NG","value":"IOException occured when talking to server at: http://192.168.0.62:8983/solr/place","baseClass":[]}},{"des":"Get user places","method":"POST","url":"${env.url}:${env.port}/whatseat/place/getUserPlaces","body":{"aid":"8130e305-c1b7-4d51-a770-390d9821ec49"},"expect":{"data":{"code":"OK"},"status":[200,201]},"id":"N-4","resultTest":{"start":1459162629299,"pass":false,"des":"Expected: code = \"OK\", Actual: code = \"NG\"","stop":1459162641296,"duration":11997},"_url":"http://localhost:8080/whatseat/place/getUserPlaces","_body":{"aid":"8130e305-c1b7-4d51-a770-390d9821ec49"},"actual":{"code":"NG","value":"Get User Places have been successfully","baseClass":[]}},{"des":"Get places details","method":"POST","url":"${env.url}:${env.port}/whatseat/place/getPlaces","body":{"placesId":["33f32d28-b03d-41ee-97e5-7eac7ce435d9"]},"expect":{"data":{"code":"OK"},"status":[200,201]},"id":"N-5","resultTest":{"start":1459162641296,"pass":false,"des":"Expected: code = \"OK\", Actual: code = \"NG\"","stop":1459162653300,"duration":12004},"_url":"http://localhost:8080/whatseat/place/getPlaces","_body":{"placesId":["33f32d28-b03d-41ee-97e5-7eac7ce435d9"]},"actual":{"code":"NG","value":"Get Places have been successfully","baseClass":[]}},{"des":"Delete place","method":"POST","url":"${env.url}:${env.port}/whatseat/place/deletePlace","body":{"aid":"8130e305-c1b7-4d51-a770-390d9821ec49","token":"3c9e2fe3399e67d33e98e9ee9a97f115","placeId":"33f32d28-b03d-41ee-97e5-7eac7ce435d9"},"expect":{"data":{"code":"OK"}},"id":"N-6","resultTest":{"start":1459162653300,"pass":false,"des":"Error undefined: \"undefined\"","stop":1459162660660,"duration":7360},"_url":"http://localhost:8080/whatseat/place/deletePlace","_body":{"aid":"8130e305-c1b7-4d51-a770-390d9821ec49","token":"3c9e2fe3399e67d33e98e9ee9a97f115","placeId":"33f32d28-b03d-41ee-97e5-7eac7ce435d9"}}],"pass":2,"fail":4}],"pass":3,"fail":4};
		    $scope.showLog = function(title, obj){
		    	console.info(title);
		    	console.log(obj);
		    }
		  });
	</script>
</html>